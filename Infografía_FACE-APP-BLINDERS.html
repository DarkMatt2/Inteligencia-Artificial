<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blinders - Sistema de Reconocimiento Facial CNN</title>
    
    <!-- Prism.js para syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        header h1 {
            font-size: 3em;
            color: #1e3c72;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        header .subtitle {
            font-size: 1.3em;
            color: #2a5298;
            font-weight: 300;
        }
        
        header .team {
            margin-top: 20px;
            font-size: 0.9em;
            color: #666;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .tab-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #2a5298;
            padding-bottom: 10px;
        }
        
        .card h3 {
            color: #2a5298;
            margin: 20px 0 15px 0;
            font-size: 1.3em;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.4);
        }
        
        .metric-card .value {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-card .label {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .architecture-flow {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .flow-step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #1e3c72;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .flow-step h4 {
            color: #1e3c72;
            margin-bottom: 10px;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(52, 73, 94, 0.4);
        }
        
        /* Tabla de arquitectura del modelo */
        .model-architecture-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: #2d2d2d;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .model-architecture-table th {
            background: #1e3c72;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .model-architecture-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #404040;
            color: #f8f8f2;
        }
        
        .model-architecture-table tr:last-child td {
            border-bottom: none;
        }
        
        .model-architecture-table tr:hover {
            background: #3a3a3a;
        }
        
        .model-summary {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 0 0 10px 10px;
            font-family: 'Courier New', monospace;
            margin-top: -20px;
        }
        
        .model-summary strong {
            color: #4ec9b0;
        }
        
        /* Tabla de √©pocas */
        .epoch-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .epoch-table th {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .epoch-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .epoch-table tr:hover {
            background: #f8f9fa;
        }
        
        .epoch-table tr.final-epoch {
            background: #e8f4f8;
            font-weight: 600;
        }
        
        /* Bloques de c√≥digo con Prism.js */
        pre[class*="language-"] {
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        code[class*="language-"] {
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        .code-label {
            background: #1e3c72;
            color: white;
            padding: 10px 20px;
            border-radius: 10px 10px 0 0;
            font-weight: 600;
            margin-bottom: -10px;
            display: inline-block;
        }
        
        .highlight {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: 600;
            color: white;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 5px;
        }
        
        .badge-success {
            background: #27ae60;
            color: white;
        }
        
        .badge-info {
            background: #2980b9;
            color: white;
        }
        
        .badge-warning {
            background: #f39c12;
            color: white;
        }
        
        .crisp-phases {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .phase-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-top: 5px solid #1e3c72;
        }
        
        .phase-card .phase-number {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .phase-card h3 {
            color: #1e3c72;
            margin-bottom: 15px;
        }
        
        ul.custom-list {
            list-style: none;
            padding-left: 0;
        }
        
        ul.custom-list li {
            padding: 10px 0 10px 30px;
            position: relative;
        }
        
        ul.custom-list li:before {
            content: "‚ñ∂";
            color: #1e3c72;
            position: absolute;
            left: 0;
        }
        
        .github-link {
            display: inline-block;
            background: #24292e;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        
        .github-link:hover {
            background: #0366d6;
            transform: translateX(5px);
        }
        
        footer {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            margin-top: 30px;
            color: #666;
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé≠ BLINDERS</h1>
            <div class="subtitle">Sistema de Reconocimiento Facial con CNN y Despliegue M√≥vil</div>
            <div class="team">
                <strong>Equipo:</strong> J. N. Paredes Puma ‚Ä¢ A. E. Rojas Cornejo ‚Ä¢ L. M. Salas Challco ‚Ä¢ M. J. Segovia Palacios<br>
                Universidad Andina del Cusco | Ingenier√≠a de Sistemas
            </div>
        </header>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('resumen')">üìä Resumen</button>
            <button class="tab-btn" onclick="showTab('crisp')">üîÑ CRISP-DM</button>
            <button class="tab-btn" onclick="showTab('modelo')">üß† Modelo & M√©tricas</button>
            <button class="tab-btn" onclick="showTab('arquitectura')">üèóÔ∏è Arquitectura</button>
            <button class="tab-btn" onclick="showTab('codigo')">üíª C√≥digo</button>
            <button class="tab-btn" onclick="showTab('resultados')">üéØ Resultados</button>
        </div>

        <!-- RESUMEN -->
        <div id="resumen" class="content-section active">
            <div class="card">
                <h2>üìù Resumen Ejecutivo</h2>
                <p><strong>Objetivo:</strong> Implementar un sistema completo de reconocimiento facial utilizando Redes Neuronales Convolucionales (CNN) con despliegue en aplicaci√≥n m√≥vil Android mediante Flutter.</p>
                
                <div class="metrics-grid" style="margin-top: 30px;">
                    <div class="metric-card">
                        <div class="label">Accuracy Final</div>
                        <div class="value">100%</div>
                        <div class="label">Conjunto de Validaci√≥n</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Latencia Promedio</div>
                        <div class="value">350ms</div>
                        <div class="label">Por Frame (< 500ms ‚úì)</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Clases</div>
                        <div class="value">4</div>
                        <div class="label">Personas Identificadas</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">√âpocas</div>
                        <div class="value">8</div>
                        <div class="label">Entrenamiento Completo</div>
                    </div>
                </div>

                <h3>üéØ Logros Principales</h3>
                <ul class="custom-list">
                    <li><span class="highlight">Accuracy > 90%</span> alcanzado (100% en validaci√≥n final)</li>
                    <li><span class="highlight">Latencia < 500ms</span> cumplida (350ms promedio)</li>
                    <li>Despliegue exitoso en dispositivos Android con Flutter</li>
                    <li>Pipeline completo desde entrenamiento hasta producci√≥n</li>
                    <li>Modelo optimizado con TensorFlow Lite (8.63 MB)</li>
                </ul>

                <h3>üîß Stack Tecnol√≥gico</h3>
                <div class="tech-stack">
                    <div class="tech-item">Python + TensorFlow</div>
                    <div class="tech-item">Keras + MobileNetV2</div>
                    <div class="tech-item">Flutter + Dart</div>
                    <div class="tech-item">TensorFlow Lite</div>
                    <div class="tech-item">ML Kit (Google)</div>
                    <div class="tech-item">Camera Plugin</div>
                </div>

                <a href="https://github.com/Musgus/blinders_tflite" target="_blank" class="github-link">
                    üì¶ Ver C√≥digo en GitHub ‚Üí
                </a>
            </div>
        </div>

        <!-- CRISP-DM -->
        <div id="crisp" class="content-section">
            <div class="card">
                <h2>üîÑ Metodolog√≠a CRISP-DM</h2>
                <p>El proyecto sigui√≥ las 6 fases de CRISP-DM (Cross-Industry Standard Process for Data Mining)</p>

                <div class="crisp-phases">
                    <div class="phase-card">
                        <div class="phase-number">1</div>
                        <h3>Comprensi√≥n del Negocio</h3>
                        <p><strong>Objetivo:</strong> Sistema de identificaci√≥n facial para 4 personas en tiempo real</p>
                        <p><strong>Criterios de √âxito:</strong></p>
                        <ul class="custom-list">
                            <li>Accuracy > 90%</li>
                            <li>Latencia < 500ms por frame</li>
                        </ul>
                        <span class="badge badge-info">TensorFlow + Keras</span>
                        <span class="badge badge-info">Flutter + TFLite</span>
                    </div>

                    <div class="phase-card">
                        <div class="phase-number">2</div>
                        <h3>Comprensi√≥n de Datos</h3>
                        <p><strong>Dataset:</strong> 501 im√°genes totales</p>
                        <ul class="custom-list">
                            <li>401 im√°genes de entrenamiento</li>
                            <li>100 im√°genes de validaci√≥n</li>
                            <li>4 clases: abel, jairo, luis, mark</li>
                            <li>Variabilidad en pose, iluminaci√≥n, expresi√≥n</li>
                        </ul>
                        <span class="badge badge-success">Dataset Balanceado</span>
                    </div>

                    <div class="phase-card">
                        <div class="phase-number">3</div>
                        <h3>Preparaci√≥n de Datos</h3>
                        <ul class="custom-list">
                            <li>Detecci√≥n y recorte facial con OpenCV</li>
                            <li>Resize a 224√ó224 p√≠xeles</li>
                            <li>Normalizaci√≥n [0, 1]</li>
                            <li>Data Augmentation: rotaci√≥n, zoom, flip</li>
                            <li>Split: 70% train, 15% val, 15% test</li>
                        </ul>
                        <span class="badge badge-warning">IMG_SIZE = 224</span>
                    </div>

                    <div class="phase-card">
                        <div class="phase-number">4</div>
                        <h3>Modelado</h3>
                        <p><strong>Arquitectura:</strong> Transfer Learning</p>
                        <ul class="custom-list">
                            <li>Base: MobileNetV2 (ImageNet)</li>
                            <li>GlobalAveragePooling2D</li>
                            <li>Dropout(0.3)</li>
                            <li>Dense(4, softmax)</li>
                        </ul>
                        <p><strong>Par√°metros Totales:</strong> 2,263,108 (8.63 MB)</p>
                        <p><strong>Entrenables:</strong> 5,124 (20.02 KB)</p>
                        <span class="badge badge-info">Optimizer: Adam (1e-4)</span>
                        <span class="badge badge-info">Loss: Sparse Categorical CE</span>
                    </div>

                    <div class="phase-card">
                        <div class="phase-number">5</div>
                        <h3>Evaluaci√≥n</h3>
                        <p><strong>Resultados Finales:</strong></p>
                        <ul class="custom-list">
                            <li>Validation Accuracy: <strong>100%</strong></li>
                            <li>Validation Loss: <strong>0.1385</strong></li>
                            <li>Matriz de confusi√≥n generada</li>
                            <li>F1-Score consistentemente alto</li>
                        </ul>
                        <span class="badge badge-success">Criterios Cumplidos ‚úì</span>
                    </div>

                    <div class="phase-card">
                        <div class="phase-number">6</div>
                        <h3>Despliegue</h3>
                        <p><strong>Conversi√≥n a TFLite:</strong></p>
                        <ul class="custom-list">
                            <li>Modelo optimizado (float32)</li>
                            <li>Aplicaci√≥n Flutter Android</li>
                            <li>Integraci√≥n ML Kit</li>
                            <li>Pipeline YUV‚ÜíNV21‚ÜíCrop‚ÜíRGB</li>
                            <li>Latencia: 350ms promedio</li>
                        </ul>
                        <span class="badge badge-success">Producci√≥n ‚úì</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODELO Y M√âTRICAS -->
        <div id="modelo" class="content-section">
            <div class="card">
                <h2>üß† Modelo y M√©tricas de Entrenamiento</h2>
                
                <h3>Arquitectura del Modelo</h3>
                <table class="model-architecture-table">
                    <thead>
                        <tr>
                            <th>Layer (type)</th>
                            <th>Output Shape</th>
                            <th>Param #</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>input_layer (InputLayer)</td>
                            <td>(None, 224, 224, 3)</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td>mobilenetv2_1.00_224 (Functional)</td>
                            <td>(None, 7, 7, 1280)</td>
                            <td>2,257,984</td>
                        </tr>
                        <tr>
                            <td>global_average_pooling2d</td>
                            <td>(None, 1280)</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td>dropout (Dropout 0.3)</td>
                            <td>(None, 1280)</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td>dense (Dense softmax)</td>
                            <td>(None, 4)</td>
                            <td>5,124</td>
                        </tr>
                    </tbody>
                </table>
                <div class="model-summary">
                    <strong>Total params:</strong> 2,263,108 (8.63 MB)<br>
                    <strong>Trainable params:</strong> 5,124 (20.02 KB)<br>
                    <strong>Non-trainable params:</strong> 2,257,984 (8.61 MB)
                </div>

                <h3>üìà Evoluci√≥n del Entrenamiento (8 √âpocas)</h3>
                <table class="epoch-table">
                    <thead>
                        <tr>
                            <th>√âpoca</th>
                            <th>Train Accuracy</th>
                            <th>Train Loss</th>
                            <th>Val Accuracy</th>
                            <th>Val Loss</th>
                            <th>Tiempo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1/8</td>
                            <td>45.39%</td>
                            <td>1.2374</td>
                            <td>71.00%</td>
                            <td>0.9167</td>
                            <td>1m 10s</td>
                        </tr>
                        <tr>
                            <td>2/8</td>
                            <td>66.33%</td>
                            <td>0.8716</td>
                            <td>93.00%</td>
                            <td>0.6536</td>
                            <td>1m 5s</td>
                        </tr>
                        <tr>
                            <td>3/8</td>
                            <td>82.79%</td>
                            <td>0.6575</td>
                            <td>97.00%</td>
                            <td>0.4705</td>
                            <td>1m 6s</td>
                        </tr>
                        <tr>
                            <td>4/8</td>
                            <td>91.02%</td>
                            <td>0.5006</td>
                            <td>99.00%</td>
                            <td>0.3470</td>
                            <td>1m 5s</td>
                        </tr>
                        <tr>
                            <td>5/8</td>
                            <td>96.26%</td>
                            <td>0.3816</td>
                            <td>100.00%</td>
                            <td>0.2655</td>
                            <td>1m 5s</td>
                        </tr>
                        <tr>
                            <td>6/8</td>
                            <td>97.26%</td>
                            <td>0.2758</td>
                            <td>100.00%</td>
                            <td>0.2070</td>
                            <td>1m 5s</td>
                        </tr>
                        <tr>
                            <td>7/8</td>
                            <td>99.00%</td>
                            <td>0.2323</td>
                            <td>100.00%</td>
                            <td>0.1666</td>
                            <td>1m 5s</td>
                        </tr>
                        <tr class="final-epoch">
                            <td><strong>8/8</strong></td>
                            <td><strong>99.25%</strong></td>
                            <td><strong>0.1865</strong></td>
                            <td><strong>100.00%</strong></td>
                            <td><strong>0.1385</strong></td>
                            <td><strong>1m 5s</strong></td>
                        </tr>
                    </tbody>
                </table>

                <div class="metrics-grid" style="margin-top: 30px;">
                    <div class="metric-card">
                        <div class="label">Validation Accuracy</div>
                        <div class="value">100%</div>
                        <div class="label">√âpoca 5-8</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Final Loss</div>
                        <div class="value">0.1385</div>
                        <div class="label">√âpoca 8</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Batch Size</div>
                        <div class="value">16</div>
                        <div class="label">Im√°genes por paso</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Tiempo Total</div>
                        <div class="value">~9min</div>
                        <div class="label">8 √âpocas</div>
                    </div>
                </div>

                <h3>üéØ Clases Identificadas</h3>
                <div class="tech-stack">
                    <div class="tech-item">üë§ Abel</div>
                    <div class="tech-item">üë§ Jairo</div>
                    <div class="tech-item">üë§ Luis</div>
                    <div class="tech-item">üë§ Mark</div>
                </div>
            </div>
        </div>

        <!-- ARQUITECTURA -->
        <div id="arquitectura" class="content-section">
            <div class="card">
                <h2>üèóÔ∏è Arquitectura de la Aplicaci√≥n M√≥vil</h2>

                <h3>üì± Pipeline de Procesamiento</h3>
                <div class="architecture-flow">
                    <div class="flow-step">
                        <h4>1Ô∏è‚É£ Captura de C√°mara</h4>
                        <p>Plugin <code>camera: ^0.11.3</code> captura frames en formato YUV_420_888</p>
                        <span class="badge badge-info">ResolutionPreset.medium</span>
                    </div>

                    <div class="flow-step">
                        <h4>2Ô∏è‚É£ Conversi√≥n de Formato</h4>
                        <p><code>lib/pipeline/image_utils.dart</code> convierte YUV_420_888 ‚Üí NV21</p>
                        <span class="badge badge-warning">Compatibilidad ML Kit</span>
                    </div>

                    <div class="flow-step">
                        <h4>3Ô∏è‚É£ Detecci√≥n Facial</h4>
                        <p><code>lib/pipeline/mlkit_service.dart</code> detecta rostro m√°s grande con ML Kit</p>
                        <p><code>google_mlkit_face_detection: ^0.13.1</code></p>
                        <span class="badge badge-success">Bounding Box Real-Time</span>
                    </div>

                    <div class="flow-step">
                        <h4>4Ô∏è‚É£ Recorte y Resize</h4>
                        <p>Extrae regi√≥n del rostro del plano Y (luma), reescala a 224√ó224</p>
                        <p>Replica canal Y en R/G/B para compatibilidad con modelo</p>
                        <span class="badge badge-info">INPUT_SIZE = 224</span>
                    </div>

                    <div class="flow-step">
                        <h4>5Ô∏è‚É£ Inferencia TFLite</h4>
                        <p><code>lib/pipeline/tflite_service.dart</code> ejecuta modelo TFLite</p>
                        <p><code>tflite_flutter: ^0.12.1</code></p>
                        <span class="badge badge-success">Latencia: 350ms</span>
                    </div>

                    <div class="flow-step">
                        <h4>6Ô∏è‚É£ UI Update</h4>
                        <p><code>main.dart</code> actualiza probabilidades cada 5 frames</p>
                        <p>Muestra top-4 predicciones con porcentajes</p>
                        <span class="badge badge-warning">UPDATE_FRAMES = 5</span>
                        <span class="badge badge-warning">WARMUP = 30s</span>
                    </div>
                </div>

                <h3>üì¶ Estructura de M√≥dulos</h3>
                <div class="tech-stack">
                    <div class="tech-item">main.dart<br><small>Orquestador Principal</small></div>
                    <div class="tech-item">mlkit_service.dart<br><small>Detecci√≥n Facial</small></div>
                    <div class="tech-item">tflite_service.dart<br><small>Inferencia TFLite</small></div>
                    <div class="tech-item">image_utils.dart<br><small>Conversi√≥n Im√°genes</small></div>
                </div>

                <h3>‚öôÔ∏è Caracter√≠sticas de la App</h3>
                <ul class="custom-list">
                    <li>‚úÖ Previsualizaci√≥n de c√°mara en tiempo real</li>
                    <li>‚úÖ Rect√°ngulo verde siguiendo rostro detectado</li>
                    <li>‚úÖ Panel inferior con top-4 probabilidades</li>
                    <li>‚úÖ Bot√≥n para cambiar entre c√°mara frontal/trasera</li>
                    <li>‚úÖ Per√≠odo de warm-up de 30 segundos</li>
                    <li>‚úÖ Mirroring autom√°tico para c√°mara frontal</li>
                    <li>‚úÖ Throttling de inferencia (cada 5 frames)</li>
                    <li>‚úÖ Procesamiento as√≠ncrono para UI fluida</li>
                </ul>
            </div>
        </div>

        <!-- C√ìDIGO -->
        <div id="codigo" class="content-section">
            <div class="card">
                <h2>üíª Fragmentos de C√≥digo Clave</h2>

                <h3>üêç Entrenamiento (Python)</h3>
                <div class="code-label">train_tf_recognizer.py</div>
                <pre><code class="language-python"># Configuraci√≥n del modelo
CONFIG = {
    'dataset': r'C:/Users/jairo/Downloads/AI/data',
    'output_dir': r'scripts/output',
    'img_size': 224,
    'batch_size': 16,
    'epochs': 8,
    'tflite_name': 'model.tflite',
    'quantize_fp16': False,
}

# Arquitectura con Transfer Learning
def build_model(input_shape, num_classes):
    base = tf.keras.applications.MobileNetV2(
        input_shape=input_shape,
        include_top=False,
        weights='imagenet'
    )
    base.trainable = False
    
    inputs = keras.Input(shape=input_shape)
    x = tf.keras.applications.mobilenet_v2.preprocess_input(inputs)
    x = base(x, training=False)
    x = keras.layers.GlobalAveragePooling2D()(x)
    x = keras.layers.Dropout(0.3)(x)
    outputs = keras.layers.Dense(num_classes, activation='softmax')(x)
    
    return keras.Model(inputs, outputs)

# Compilaci√≥n
model.compile(
    optimizer=keras.optimizers.Adam(learning_rate=1e-4),
    loss='sparse_categorical_crossentropy',
    metrics=['accuracy']
)

# Conversi√≥n a TFLite
converter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)
tflite_model = converter.convert()</code></pre>

                <h3>üì± Procesamiento de Frame (Dart/Flutter)</h3>
                <div class="code-label">main.dart - _processCameraImage()</div>
                <pre><code class="language-dart">// Pipeline completo en main.dart
Future&lt;void&gt; _processCameraImage(CameraImage cameraImage) async {
  if (_isProcessing) return;
  _isProcessing = true;

  try {
    // 1. Detectar rostro m√°s grande
    final faceBox = await _mlKit.detectLargestFace(cameraImage);
    if (faceBox == null) {
      _isProcessing = false;
      return;
    }

    // 2. Actualizar UI con bounding box (tiempo real)
    setState(() {
      _lastFaceBox = faceBox;
      _lastImageSize = Size(
        cameraImage.width.toDouble(),
        cameraImage.height.toDouble()
      );
    });

    // 3. Crop y resize (Y ‚Üí RGB)
    final processed = ImageUtils.cropResizeYToRGB(
      cameraImage, 
      faceBox, 
      INPUT_SIZE, 
      INPUT_SIZE
    );

    // 4. Inferencia TFLite
    final probs = TfliteService.run(
      _interpreter, 
      processed,
      height: INPUT_SIZE,
      width: INPUT_SIZE,
      channels: 3
    );

    // 5. Actualizar probabilidades cada UPDATE_FRAMES
    _frameCounter++;
    if (_frameCounter % UPDATE_FRAMES == 0) {
      setState(() {
        _displayedProbs = List&lt;double&gt;.from(probs);
      });
    }
  } finally {
    _isProcessing = false;
  }
}</code></pre>

                <h3>üé® Painter para Bounding Box</h3>
                <div class="code-label">main.dart - FaceBoxPainter</div>
                <pre><code class="language-dart">class FaceBoxPainter extends CustomPainter {
  final RectLike? box;
  final Size? imageSize;
  final bool mirror;

  @override
  void paint(Canvas canvas, Size size) {
    if (box == null || imageSize == null) return;
    
    final sx = size.width / imageSize!.width;
    final sy = size.height / imageSize!.height;
    
    double left = box!.left * sx;
    final double top = box!.top * sy;
    final double width = (box!.right - box!.left) * sx;
    final double height = (box!.bottom - box!.top) * sy;
    
    // Mirror para c√°mara frontal
    if (mirror) {
      left = size.width - (left + width);
    }
    
    final rect = Rect.fromLTWH(left, top, width, height);
    final paint = Paint()
      ..style = PaintingStyle.stroke
      ..color = Colors.greenAccent
      ..strokeWidth = 3;
    
    canvas.drawRect(rect, paint);
  }

  @override
  bool shouldRepaint(covariant FaceBoxPainter oldDelegate) {
    return oldDelegate.box != box || oldDelegate.imageSize != imageSize;
  }
}</code></pre>

                <a href="https://github.com/Musgus/blinders_tflite" target="_blank" class="github-link">
                    üîó Ver C√≥digo Completo en GitHub ‚Üí
                </a>
            </div>
        </div>

        <!-- RESULTADOS -->
        <div id="resultados" class="content-section">
            <div class="card">
                <h2>üéØ Resultados y Conclusiones</h2>

                <h3>‚úÖ Logros Cumplidos</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="label">Criterio 1</div>
                        <div class="value">‚úì</div>
                        <div class="label">Accuracy > 90%<br>(100% alcanzado)</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Criterio 2</div>
                        <div class="value">‚úì</div>
                        <div class="label">Latencia < 500ms<br>(350ms alcanzado)</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Despliegue</div>
                        <div class="value">‚úì</div>
                        <div class="label">App Android<br>Funcional</div>
                    </div>
                    <div class="metric-card">
                        <div class="label">Pipeline</div>
                        <div class="value">‚úì</div>
                        <div class="label">End-to-End<br>Completo</div>
                    </div>
                </div>

                <h3>üìä An√°lisis de Rendimiento</h3>
                <ul class="custom-list">
                    <li><strong>Accuracy:</strong> El modelo alcanz√≥ 100% en validaci√≥n desde la √©poca 5, demostrando excelente capacidad de generalizaci√≥n</li>
                    <li><strong>Loss:</strong> Convergencia estable de 1.2374 ‚Üí 0.1385 en 8 √©pocas</li>
                    <li><strong>Latencia:</strong> 350ms promedio en dispositivos mid-range, cumpliendo ampliamente el requisito de <500ms</li>
                    <li><strong>FPS:</strong> >15 FPS de actualizaci√≥n de UI, proporcionando experiencia fluida</li>
                    <li><strong>Modelo:</strong> Tama√±o optimizado de 8.63 MB con TensorFlow Lite</li>
                </ul>

                <h3>üîç Trade-offs Identificados</h3>
                <div class="flow-step">
                    <h4>Conversi√≥n Y‚ÜíRGB Simplificada</h4>
                    <p>‚úÖ <strong>Pro:</strong> Mayor velocidad de procesamiento</p>
                    <p>‚ö†Ô∏è <strong>Con:</strong> Podr√≠a limitar discriminaci√≥n donde el color es relevante</p>
                </div>
                <div class="flow-step">
                    <h4>Throttling de Probabilidades (cada 5 frames)</h4>
                    <p>‚úÖ <strong>Pro:</strong> Mejora estabilidad visual y reduce carga computacional</p>
                    <p>‚ö†Ô∏è <strong>Con:</strong> Introduce ligero delay en respuesta (~150-200ms)</p>
                </div>
                <div class="flow-step">
                    <h4>Dataset Limitado</h4>
                    <p>‚úÖ <strong>Pro:</strong> Alto rendimiento para el grupo objetivo</p>
                    <p>‚ö†Ô∏è <strong>Con:</strong> Generalizaci√≥n limitada a poblaciones m√°s amplias</p>
                </div>

                <h3>üöÄ Trabajo Futuro</h3>
                <div class="crisp-phases">
                    <div class="phase-card">
                        <h3>Optimizaci√≥n</h3>
                        <ul class="custom-list">
                            <li>Implementar NNAPI/GPU delegate</li>
                            <li>Cuantizaci√≥n int8</li>
                            <li>Conversi√≥n YUV‚ÜíRGB completa</li>
                            <li>Suavizado temporal de predicciones</li>
                        </ul>
                    </div>
                    <div class="phase-card">
                        <h3>Dataset</h3>
                        <ul class="custom-list">
                            <li>Expandir con m√°s im√°genes</li>
                            <li>Mayor diversidad de condiciones</li>
                            <li>Aumentar variabilidad de poses</li>
                            <li>Incluir m√°s clases</li>
                        </ul>
                    </div>
                    <div class="phase-card">
                        <h3>Monitoreo</h3>
                        <ul class="custom-list">
                            <li>Telemetr√≠a en producci√≥n</li>
                            <li>Detecci√≥n de model drift</li>
                            <li>M√©tricas de usuario</li>
                            <li>A/B testing</li>
                        </ul>
                    </div>
                </div>

                <h3>üí° Aprendizajes Clave</h3>
                <ul class="custom-list">
                    <li><strong>CRISP-DM:</strong> Metodolog√≠a proporcion√≥ estructura clara y fases bien definidas</li>
                    <li><strong>Transfer Learning:</strong> MobileNetV2 result√≥ ideal para dispositivos m√≥viles (balance precisi√≥n/eficiencia)</li>
                    <li><strong>TFLite:</strong> Conversi√≥n exitosa sin p√©rdida significativa de precisi√≥n</li>
                    <li><strong>Flutter:</strong> Desarrollo multiplataforma √°gil con excelente rendimiento</li>
                    <li><strong>ML Kit:</strong> Detecci√≥n facial robusta y eficiente out-of-the-box</li>
                </ul>

                <h3>üìö Referencias</h3>
                <pre style="background: #f8f9fa; color: #333; padding: 20px; border-radius: 10px; font-family: 'Courier New', monospace; font-size: 0.9em;">[1] C. Shearer, "The CRISP-DM model: The new blueprint for data mining,"
    J. Data Warehousing, vol. 5, no. 4, pp. 13-22, 2000.

[2] S. Lawrence, C. L. Giles, A. C. Tsoi, and A. D. Back,
    "Face recognition: A convolutional neural-network approach,"
    IEEE Trans. Neural Netw., vol. 8, no. 1, pp. 98-113, Jan. 1997.

[3] Equipo Blinders, "blinders_tflite," GitHub.
    Available: https://github.com/Musgus/blinders_tflite.
    Accessed: Nov. 2, 2025.</pre>
            </div>
        </div>

        <footer>
            <h3 style="color: #1e3c72; margin-bottom: 15px;">üéì Universidad Andina del Cusco</h3>
            <p><strong>Escuela Profesional de Ingenier√≠a de Sistemas</strong></p>
            <p>Proyecto: Sistema de Reconocimiento Facial con CNN</p>
            <p>Metodolog√≠a: CRISP-DM | Framework: TensorFlow + Flutter</p>
            <p style="margin-top: 20px; color: #999;">
                Noviembre 2025 | Cusco, Per√∫
            </p>
        </footer>
    </div>

    <!-- Prism.js para syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-dart.min.js"></script>

    <script>
        function showTab(tabName) {
            // Ocultar todas las secciones
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Remover active de todos los botones
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });

            // Mostrar secci√≥n seleccionada
            document.getElementById(tabName).classList.add('active');

            // Activar bot√≥n correspondiente
            event.target.classList.add('active');

            // Scroll suave al inicio
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Animaci√≥n al hacer scroll
        window.addEventListener('scroll', () => {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const cardTop = card.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                if (cardTop < windowHeight - 100) {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }
            });
        });

        // Inicializar animaciones
        document.addEventListener('DOMContentLoaded', () => {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'all 0.6s ease';
            });
        });
    </script>
</body>
</html>
